{% extends "base.html" %}

{% block content %}
  <h3>Training Lists for <br>"{{ text.title }}"</h3>

   <hr>

  <h4>Create New Training List</h4>
  <form method="POST">
    {{ form.hidden_tag() }}
  <div class="d-flex align-items-center mb-3" style="gap: 0.5rem;">
    <label for="{{ form.name.id }}" class="form-label mb-0">{{ form.name.label }}</label>
    {{ form.name(class="form-control", style="width: 300px;") }}
  </div>
    <!-- Line 2: Lang from –∏ Lang to -->
  <div class="d-flex gap-3 align-items-center flex-wrap mb-3">
    <div class="d-flex align-items-center" style="gap: 0.5rem;">
      <label for="{{ form.lang_from.id }}" class="form-label mb-0">{{ form.lang_from.label }}</label>
      {{ form.lang_from(class="form-select", style="min-width: 150px; max-width: 200px;") }}
    </div>

    <div class="d-flex align-items-center" style="gap: 0.5rem;">
      <label for="{{ form.lang_to.id }}" class="form-label mb-0">{{ form.lang_to.label }}</label>
      {{ form.lang_to(class="form-select", style="min-width: 150px; max-width: 200px;") }}
    </div>
  </div>

  <div>
    {{ form.submit(class="btn btn-primary") }}
  </div>

  </form>

  <hr>

  {% if lists %}
    <table class="table table-striped table-hover glo-hover-table table-sm align-middle">

      <thead class="table-light">
        <tr>
          <th>List Name</th>
          <th># Items</th>
          <th>Created</th>
          <th>Last Used</th>
          <th>Languages</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for lst in lists %}
          <tr>
            <td><strong>{{ lst.name }}</strong></td>
            <td>{{ lst.item_count }}</td>
            <td>{{ lst.created_at.strftime('%Y-%m-%d') }}</td>
            <td>{{ lst.last_used_at.strftime('%Y-%m-%d') }}</td>
            <td>{{ lst.lang_from }}-{{ lst.lang_to }}</td>
            <td>
              <a href="{{ url_for('main.edit_training_list', list_id=lst.id) }}" class="btn btn-xs btn-outline-secondary">‚úèÔ∏è Edit</a>
              <a href="{{ url_for('main.add_training_item', list_id=lst.id) }}" class="btn btn-xs btn-outline-success">‚ûï Add</a>
              <a href="{{ url_for('main.train_list', list_id=lst.id) }}" class="btn btn-xs btn-outline-primary">‚ñ∂Ô∏è Train</a>
              &nbsp;&nbsp;&nbsp;
{% if lst.item_count == 0 %}
  {% set confirm_message = "Are you sure you want to delete this list?\\nThe list is currently empty." %}
{% else %}
  {% set confirm_message = (
    "Are you sure you want to delete this list?\\n"
    "This will permanently delete all {} training item{} associated with this list."
    .format(lst.item_count, 's' if lst.item_count != 1 else '')
  ) %}
{% endif %}
              <form method="POST"
                    action="{{ url_for('main.delete_training_list', list_id=lst.id) }}"
                    style="display:inline;"
                    onsubmit="return confirm('{{ confirm_message }}');"
              >
                <button type="submit" class="btn btn-xs btn-outline-danger">üóëÔ∏è Delete</button>
              </form>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

  {% else %}
    <p>No training lists yet.</p>
  {% endif %}
{% endblock %}
